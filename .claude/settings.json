{
  "alwaysAllowRead": [
    "/Users/koyama.koji/git/self/test-kanteen/aaa_test_kanteen/**",
    "/Users/koyama.koji/git/self/test-kanteen/aaa_spec/**"
  ],
  "customInstructions": "# Test Kanteen プロジェクト - Claude Code 指示\n\n## 🎯 このプロジェクトの本質\n\n**test-kanteenは、人間とLLMの「共通スペック」を生成するツールです。**\n\nテストコードから抽出したカタログは、単なるドキュメントではありません。それは：\n- **人間にとって**: テスト観点を可視化し、品質を確認できる設計図\n- **LLMにとって**: プロジェクトの意図、要件、制約を理解するための実行可能な仕様書\n- **共通スペック**: 両者が同じ「真実」を参照することで、AI駆動開発が可能になる\n\n## 📋 常に参照すべきファイル\n\n開発時は**常に**以下のファイルを参照してください（明示的に指示されなくても）：\n\n### 1. テストカタログ（共通スペック）\n- **場所**: `./aaa_test_kanteen/catalog.json`\n- **内容**: test-kanteen自身の全テスト（213テスト）の構造とパターン\n- **用途**: \n  - プランニング時: 類似機能の設計パターンを確認\n  - 実装時: 変更対象の関数がどうテストされているかを確認\n  - テスト作成時: 既存のテストパターンに従う\n  - レビュー時: カバレッジと一貫性をチェック\n\n### 2. プロジェクトガイド\n- **場所**: `./aaa_spec/TEST_KANTEEN_GUIDE.md`\n- **内容**: test-kanteenのテスト戦略、重要な観点、規約\n- **用途**: プロジェクト固有の制約とベストプラクティスを理解\n\n### 3. 開発ガイド\n- **場所**: `./CLAUDE.md`\n- **内容**: 開発フロー、リリース手順、トラブルシューティング\n\n## 🚀 AI駆動開発の実践\n\n### プランニング時\n\n新機能の設計を求められたら：\n\n1. **カタログを参照**して類似機能を探す\n2. その機能のテストパターンから**要件と制約を逆算**\n3. 同じパターンで新機能を設計\n4. 必要なテストケースも同時に提案\n\n例：\n```\n「新しいXMLReporterを追加したい」\n↓\naaa_test_kanteen/catalog.jsonから\nJSONReporter/MarkdownReporterのテストを確認\n↓\nそれらがどうテストされているかから、\nReporterに必要な機能を理解\n↓\n同じ構造でXMLReporterを設計・提案\n```\n\n### 実装時\n\n関数を変更する際は：\n\n1. **カタログで該当関数のテストを検索**\n2. どのようなケースがテストされているかを確認\n3. **それらのケースを壊さないように実装**\n4. 新しいケースが必要なら、既存パターンに従ってテストも追加\n\n### リファクタリング時\n\n1. カタログで影響範囲を特定\n2. 関連するすべてのテストケースをリスト化\n3. リファクタリング後、それらが通ることを確認\n\n### コードレビュー時\n\n1. カタログと比較してテストカバレッジをチェック\n2. 命名規則の一貫性を確認（`should [期待される動作]`）\n3. 既存のテストパターンに従っているか確認\n\n## ⚡ 重要な行動原則\n\n1. **カタログファースト**: 実装前にカタログを確認する習慣\n2. **パターンの継承**: 既存のテストパターンを踏襲して一貫性を保つ\n3. **共通スペックの更新**: テスト変更後は必ずカタログを再生成\n4. **人間とLLMの同期**: カタログを通じて、人間の意図をLLMが正確に理解\n\n## 🔄 カタログ更新フロー\n\nテストを追加・変更したら：\n\n```bash\n# カタログ再生成\nnpx kanteen analyze \"tests/**/*.test.ts\" --output ./aaa_test_kanteen\n```\n\nこれにより、人間とLLMが参照する「共通スペック」が最新状態に保たれます。\n\n## 💡 test-kanteenの哲学\n\n> テストは単なる品質保証ではない。\n> それは、人間の意図をコードとして表現し、\n> LLMがそれを理解できる形式に変換したもの。\n> test-kanteenは、その「翻訳」を自動化する。\n\nこの哲学に基づき、常にカタログを参照し、\n人間とLLMが同じ理解のもとで開発を進めてください。"
}
